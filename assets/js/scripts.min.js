jQuery(document).ready(function(e){var r=e("#colorblender-form"),l=(e("#colors-table"),e('[rel="format-btn"]'),e("#col0")),o=(e("#col1"),e("#steps")),n=(new Array("00","33","66","99","CC","FF"),"hex"),t=new Array(new v,new v),s=new Array(new v,new v,new v,new v,new v,new v,new v,new v,new v,new v,new v,new v),c=new Array(3);function v(e,r,a){this.r=e,this.g=r,this.b=a,this.coll=new Array(e,r,a),this.valid=function(e){var r="n";isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||(r="y");return r}(this.coll),this.text=h(this.coll),this.bg=h(this.coll)}function h(e,r){var a="",l=1;if(r)var o=r;else o=n;if("hex"==o)var i=16;for("rgbp"==o&&(l=2.55),k=0;k<3;k++)val=Math.round(e[k]/l),piece=val.toString(i),"hex"==o&&piece.length<2&&(piece="0"+piece),"rgbp"==o&&(piece+="%"),"hex"!=o&&k<2&&(piece+=","),a+=piece;return a="hex"==o?"#"+a.toUpperCase():"rgb("+a+")"}function u(e,r){var l=1;if(e=e.toUpperCase(),col=e.replace("RGB","").replace(/[\#\(]*/i,""),"hex"==r){3==col.length&&(a=col.substr(0,1),b=col.substr(1,1),e=col.substr(2,1),col=a+a+b+b+e+e);var o=new Array(col.substr(0,2),col.substr(2,2),col.substr(4,2)),i=16}else o=col.split(","),i=10;return"rgbp"==r&&(l=2.55),new Array(parseInt(o[0],i)*l,parseInt(o[1],i)*l,parseInt(o[2],i)*l)}function w(){"y"==t[0].valid?c0=h(t[0].coll,"hex").substring(1):c0="","y"==t[1].valid?c1=h(t[1].coll,"hex").substring(1):c1="",st=o.val(),obj=e("a.coltype"),ty=obj[0].id,hashstr="#"+c0+":"+c1+":"+st+":"+ty,window.location.hash=hashstr}function p(r,a){var l=e("#"+r+a),o=e("#"+r.substring(0,1)+a);temp="col"==r?t[a]:s[a],"y"==temp.valid&&(l.val(temp.text()),o.css({"background-color":temp.bg}))}function f(r){var a=u(e("#col"+r).val(),n);t[r]=new v(a[0],a[1],a[2]),"y"==t[r].valid&&p("col",r)}function g(){var e;for(e=parseInt(o.val())+1,c[0]=(t[1].r-t[0].r)/e,c[1]=(t[1].g-t[0].g)/e,c[2]=(t[1].b-t[0].b)/e,function(){var e=parseInt(o.val())+1;for(s[0]=new v(t[0].r,t[0].g,t[0].b),s[e]=new v(t[1].r,t[1].g,t[1].b),i=1;i<e;i++){var r=t[0].r+c[0]*i,a=t[0].g+c[1]*i,l=t[0].b+c[2]*i;s[i]=new v(r,a,l)}for(j=e+1;j<12;j++)s[j].text="",s[j].bg="white"}(),i=0;i<12;i++)p("pal",i);w()}function d(r){for(o.val("0"),r||(obj=e("a.coltype"),r=obj[0].id,window.location.hash="::1:"+n),i=0;i<2;i++)t[i]=new v,e("#col"+i).val(""),e("#c"+i).css({"background-color":"white"});for(j=0;j<12;j++)s[j]=new v,e("#pal"+j).val(""),e("p"+j).css({"background-color":"white"});e("#col0").focus(),window.location.hash&&(hash=window.location.hash.substring(1),vals=hash.split(":"),vals[0]&&(e("#col0").val(vals[0]),f("0")),vals[1]&&(e("#col1").val(vals[1]),f("1")),o.val(vals[2]),r=vals[3],vals[0]&&vals[1]&&g()),function(r){for(n=r,"hex"==r?16:10,i=0;i<2;i++){var a=document.getElementById("col"+i);"y"==t[i].valid&&(t[i]=new v(t[i].r,t[i].g,t[i].b),a.value=t[i].text)}e("#hex").removeClass(),e("#rgbd").removeClass(),e("#rgbp").removeClass(),e("#"+r).addClass("coltype"),g()}(r)}d("hex"),r.on("submit",function(e){e.preventDefault()}),l.on("blur",function(e){f("0")})});